<!DOCTYPE html>
<html lang='en'>

<head>
  <meta charset='utf-8'>
<meta name='viewport' content='width=device-width, initial-scale=1'>
<meta name='description' content='I have had troubles installing fonts in Linux. Although its far easier than Windows where the only way to install a bunch of fonts is to open the file and click install fonts. In Linux however, you can copy your fonts to ~/.fonts or /usr/share/fonts and they will be recognized by all the applications. But can this process be improved or streamlined?
The main problem that I was facing was that while many sites offered fonts for free they were usually zipped/archived.'>
<meta name='theme-color' content='#33df97'>

<meta property='og:title' content='Fontstaller • The Blag'>
<meta property='og:description' content='I have had troubles installing fonts in Linux. Although its far easier than Windows where the only way to install a bunch of fonts is to open the file and click install fonts. In Linux however, you can copy your fonts to ~/.fonts or /usr/share/fonts and they will be recognized by all the applications. But can this process be improved or streamlined?
The main problem that I was facing was that while many sites offered fonts for free they were usually zipped/archived.'>
<meta property='og:url' content='https://xypnox.github.io/blag/posts/fontstaller/'>
<meta property='og:site_name' content='The Blag'>
<meta property='og:type' content='article'><meta property='og:image' content='https://xypnox.github.io/blag/images/fontstaller-cover.jpg'><meta property='article:section' content='posts'><meta property='article:tag' content='linux'><meta property='article:tag' content='programming'><meta property='article:published_time' content='2018-05-18T12:02:55&#43;05:30'/><meta property='article:modified_time' content='2018-05-18T12:02:55&#43;05:30'/><meta name='twitter:card' content='summary_large_image'><meta property='twitter:image' content='https://xypnox.github.io/blag/images/fontstaller-cover.jpg'>

<meta name="generator" content="Hugo 0.50" />

  <title>Fontstaller • The Blag</title>
  <link rel='canonical' href='https://xypnox.github.io/blag/posts/fontstaller/'>
  
  
  <link rel='icon' href='/blag/favicon.ico'>
<link rel='stylesheet' href='/blag/assets/css/main.4267b3fa.css'><link rel='stylesheet' href='/blag/css/custom.css'><style>
:root{--color-accent:#33df97;}
</style>

  

</head>


<body class='page type-posts has-cover'>

  <div class='site'>

    <a class='screen-reader-text' href='#content'>Skip to Content</a>

    <div class='main'>

      <nav id='main-menu' class='menu main-menu' aria-label='Main Menu'>
  <div class='container'>
    
    <ul><li class='item'>
        <a href='/blag/'>Home</a>
      </li><li class='item'>
        <a href='/blag/posts/'>Posts</a>
      </li><li class='item'>
        <a href='/blag/tags/'>Tags</a>
      </li><li class='item'>
        <a href='/blag/quotes/'>Quotes</a>
      </li><li class='item'>
        <a href='/blag/about/'>About</a>
      </li><li class='item'>
        <a href='https://github.com/xypnox/blag'>Repo</a>
      </li></ul>
  </div>
</nav>

      <header id='header' class='header site-header'>
        <div class='container sep-after'>
          <div class='header-info'><p class='site-title title'>The Blag</p><p class='desc site-desc'>My Blag, a collection of Physics, Computing and Philosophy</p>
          </div>
        </div>
      </header>

      <main id='content'>


<article lang='en' class='entry'>
  <header class='header entry-header'>
  <div class='container sep-after'>
    <div class='header-info'>
      <h1 class='title'>Fontstaller</h1>
      

    </div>
    <div class='entry-meta'>
  <span class='posted-on'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
  <line x1="16" y1="2" x2="16" y2="6"/>
  <line x1="8" y1="2" x2="8" y2="6"/>
  <line x1="3" y1="10" x2="21" y2="10"/>
  
</svg>
<span class='screen-reader-text'>Posted on </span>
  <time class='entry-date' datetime='2018-05-18T12:02:55&#43;05:30'>2018, May 18</time>
</span>

  
  
<span class='reading-time'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <circle cx="12" cy="12" r="10"/>
  <polyline points="12 6 12 12 15 15"/>
  
</svg>
3 mins read
</span>


</div>


  </div>
</header>

  <div class='entry-cover'>
  <figure class='container cover-full'>
    <img src='/blag/images/fontstaller-cover.jpg'/>
    
      
    
  </figure>
</div>
  

  <div class='container entry-content'>
  

<p>I have had troubles installing fonts in Linux. Although its far easier than Windows where the only way to install a bunch of fonts is to open the file and click install fonts. In Linux however, you can copy your fonts to <code>~/.fonts</code> or <code>/usr/share/fonts</code> and they will be recognized by all the applications. But can this process be improved or streamlined?</p>

<p>The main problem that I was facing was that while many sites offered fonts for free they were usually zipped/archived. Which meant that they would have to be manually unarchived one by one to install the fonts, which considering the number of fonts (36!) I wanted to install at the time was way too much. So clearly I needed a script to unzip and copy the font files in <code>~/.fonts</code>. The problem was that although the <code>unzip</code> command is fairly straightforward and could be used I didn&rsquo;t have much control over it.</p>

<p>So I searched some more and stumbled upon the fact that python comes preloaded with a zip archive reading library named <code>zipfile</code>. And I could use it to spin up a small python script to make the extraction process &ldquo;smart&rdquo;. By smart, I mean that the program could differentiate between a directory containing fonts and archives containing fonts. It can also work with nested directory structure and even detect whether a font has been preinstalled or not.</p>

<h2 id="the-program-itself-fontstaller">The program itself: FontStaller</h2>

<p><img src="https://raw.githubusercontent.com/xypnox/fontstaller/master/fontstaller-logo.png" alt="Logo" /></p>

<blockquote>
<p>You can find the code in the GitHub repo <a href="https://github.com/xypnox/fontstaller/" target="_blank">xypnox/fontstaller</a>.</p>
</blockquote>

<p>At the default settings, the Fontstaller script installs the fonts located in the folder <code>fonts</code> in the current directory. It installs all the zips that have a font file. Or any (sub - sub &hellip;) subdirectory (ies) that have a font file (generally ttf, otf).</p>

<p>The fonts are by default copied to the folder <code>~/.fonts</code>. An interesting point to note is that the directory structure of your initial <code>fonts</code> folder is <em>not</em> preserved. This is to simplify distinguishing already installed fonts. This way the script can easily check only folder names in <code>~/.fonts</code> and doesn&rsquo;t have to deal with subdirectory structure.</p>

<p>There are a few command line options to tweak the behavior of the script, they are mentioned as follows:</p>

<table>
<thead>
<tr>
<th>argument</th>
<th>default</th>
<th>description</th>
</tr>
</thead>

<tbody>
<tr>
<td>-h, --help</td>
<td></td>
<td>show help message and exit</td>
</tr>

<tr>
<td>--fdir</td>
<td>&lsquo;fonts&rsquo;</td>
<td>directory containing fonts</td>
</tr>

<tr>
<td>--idir</td>
<td>&lsquo;~/.fonts&rsquo;</td>
<td>directory in which fonts will be installed</td>
</tr>

<tr>
<td>--ignorezip</td>
<td></td>
<td>Ignore zipped files</td>
</tr>
</tbody>
</table>

<p>I know there are few bugs that still exist. Such as the fact that the script doesn&rsquo;t deal well with subdirectory structure in the archived files. However, it is still quite useful.</p>

<p>If you are interested in the fonts I was installing, check this <a href="https://github.com/xypnox/fontstaller/releases/download/v1.0.0/fonts.zip" target="_blank">archived zip</a></p>

<hr />

<h2 id="tricks">Tricks</h2>

<p>I learned a few new tricks about python scripting that I would share here.</p>

<h3 id="splitting-and-slicing-simultaneously">Splitting and slicing simultaneously</h3>

<p>You split and slice simultaneously by just splicing the output of Splitting command. For example, the line in my code that uses it is :</p>
<div class="highlight"><pre style="color:#272822;background-color:#fafafa;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-python" data-lang="python"><span style="color:#111">idir</span> <span style="color:#f92672">=</span> <span style="color:#111">args</span><span style="color:#f92672">.</span><span style="color:#111">idir</span> <span style="color:#f92672">+</span> <span style="color:#d88200">&#39;/&#39;</span> <span style="color:#f92672">+</span> <span style="color:#111">zfile</span><span style="color:#f92672">.</span><span style="color:#111">split</span><span style="color:#111">(</span><span style="color:#d88200">&#39;/&#39;</span><span style="color:#111">)[</span><span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#111">][:</span><span style="color:#f92672">-</span><span style="color:#ae81ff">4</span><span style="color:#111">]</span></code></pre></div>
<p>Here I needed only the name of the archive without the <code>.zip</code> extension. So I first split the string using <code>/</code> then slice the last element till the fifth last character. Pretty neat.</p>

<h3 id="parsing-command-line-parameters-in-python">Parsing command-line parameters in python</h3>

<p>I know its quite dumb to say it&rsquo;s a trick but it took me several readings of Manual and a few different command line parsing methods to flat this one out. I finally ended up using the <code>argparse</code> package which is a little hard, to begin with, but offers a great amount of flexibility and nice user experience such as auto-generated <code>help</code> command!</p>

<p>It is too much, to begin with, so I will simply link to its Manual page in Python : <a href="https://docs.python.org/3.6/library/argparse.html" target="_blank">Argparse</a>.</p>

</div>

  
<footer class='entry-footer'>
  <div class='container sep-before'><div class='tags'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <path d="M20.59,13.41l-7.17,7.17a2,2,0,0,1-2.83,0L2,12V2H12l8.59,8.59A2,2,0,0,1,20.59,13.41Z"/>
  <line x1="7" y1="7" x2="7" y2="7"/>
  
</svg>
<span class='screen-reader-text'>Tags: </span><a class='tag' href='/blag/tags/linux/'>linux</a>, <a class='tag' href='/blag/tags/programming/'>programming</a></div>

  </div>
</footer>


</article>

<nav class='entry-nav'>
  <div class='container'><div class='prev-entry sep-before'>
      <a href='/blag/posts/misfits/'>
        <span aria-hidden='true'><svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="20" y1="12" x2="4" y2="12"/>
  <polyline points="10 18 4 12 10 6"/>
  
</svg>
 Previous</span>
        <span class='screen-reader-text'>Previous post: </span>Misfits</a>
    </div><div class='next-entry sep-before'>
      <a href='/blag/posts/design-tips/'>
        <span class='screen-reader-text'>Next post: </span>Design Tips<span aria-hidden='true'>Next <svg class='icon' viewbox='0 0 24 24' stroke-linecap='round' stroke-linejoin='round' stroke-width='2' aria-hidden='true'>
  
  <line x1="4" y1="12" x2="20" y2="12"/>
  <polyline points="14 6 20 12 14 18"/>
  
</svg>
</span>
      </a>
    </div></div>
</nav>


<section id='comments' class='comments'>
  <div class='container sep-before'>
    <div class='comments-area'><div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "xypnox-blag" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>
  </div>
</section>

      </main>

      <footer id='footer' class='footer'>
        <div class='container sep-before'><div class='copyright'>
  <p> &copy; 2017-2018 @xypnox </p>
</div>

        </div>
      </footer>

    </div>
  </div><script>window.__public_path__='\/blag\/assets\/js\/'</script>

<script src='/blag/assets/js/main.59f76c44.js'></script><script src='/blag/js/custom.js'></script>

</body>

</html>

